!(function(){"use strict";var r=window.location,o=window.document.currentScript,d=o.getAttribute("data-api")||new URL(o.src).origin+"/api/event",S=o.getAttribute("data-instance")||"AhrefsAnalytics";function u(e,t){e&&console.warn("Ignoring Event: "+e),t&&t.callback&&t.callback()}function y(e,t){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(r.hostname)||r.protocol==="file:")return u("localhost",t);if((window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)&&!window.__web_analytics)return u(null,t);var a=o.getAttribute("data-key"),i=o.getAttribute("data-domain");if(a==null&&i==null)return u("missing data-key",t);var s;try{s=window.navigator.languages||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||window.navigator.systemLanguage}catch(p){}var n={};n.n=e,n.u=r.href,s!=null&&(n.l=s),i!=null&&(n.d=i),a!=null&&(n.k=a),n.r=window.document.referrer||null,t&&t.meta&&(n.m=JSON.stringify(t.meta)),t&&t.props&&(n.p=JSON.stringify(t.props));var g;try{g=window.screen.width}catch(p){}g!=null&&(n.sw=g);var f;try{f=window.screen.height}catch(p){}f!=null&&(n.sh=f);var h;try{h=window.devicePixelRatio}catch(p){}return h!=null&&(n.sr=h),n}function m(e,t){var a=y(e,t),i=new XMLHttpRequest;i.open("POST",d,!0),i.setRequestHeader("Content-Type","text/plain"),i.send(JSON.stringify(a)),i.onreadystatechange=function(){i.readyState===4&&t&&t.callback&&t.callback({status:i.status})}}function c(e,t){var a=navigator.sendBeacon!=null;t=t||{},t.meta=t.meta||{},t.meta.has_sendBeacon=String(a);var i=JSON.stringify(y(e,t));if(a){var s=new Blob([i],{type:"text/plain"});navigator.sendBeacon(d,s)}else{var n=new XMLHttpRequest;n.open("POST",d,!0),n.setRequestHeader("Content-Type","text/plain"),n.send(i)}}window[S]={sendEvent:m};var w;function l(){w!==r.pathname&&(w=r.pathname,m("pageview"))}var v=window.history;if(v.pushState){var k=v.pushState;v.pushState=function(){k.apply(this,arguments),l()},window.addEventListener("popstate",l)}window.document.visibilityState==="prerender"?window.document.addEventListener("visibilitychange",function(){w||window.document.visibilityState!=="visible"||l()}):l(),document.addEventListener("visibilitychange",function(){var e=document.visibilityState;e==="hidden"?c("x-visibilitychange-hidden"):e==="visible"&&c("x-visibilitychange-visible")}),document.addEventListener("pagehide",function(){c("x-pagehide")});function b(e){if(console.log("click",e.type,e.button),!e.defaultPrevented){for(var t=e.target;t&&!(typeof t.tagName=="string"&&t.tagName.toLowerCase()==="a"&&t.href);)t=t.parentElement;t&&(t&&t.host!=location.host||e.type==="auxclick"&&e.button!==1||t&&t.href&&t.host!=location.host&&c("x-external-link-click",{props:{href:t.href},meta:{metaKey:String(!!e.metaKey),ctrlKey:String(!!e.ctrlKey),shiftKey:String(!!e.shiftKey)}}))}}document.addEventListener("click",b),document.addEventListener("auxclick",b)})();

