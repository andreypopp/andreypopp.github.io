!(function(){"use strict";var r=window.location,o=window.document.currentScript,c=o.getAttribute("data-api")||new URL(o.src).origin+"/api/event",b=o.getAttribute("data-instance")||"AhrefsAnalytics";function l(a,t){a&&console.warn("Ignoring Event: "+a),t&&t.callback&&t.callback()}function f(a,t){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(r.hostname)||r.protocol==="file:")return l("localhost",t);if((window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)&&!window.__web_analytics)return l(null,t);var i=o.getAttribute("data-key"),e=o.getAttribute("data-domain");if(i==null&&e==null)return l("missing data-key",t);var s;try{s=window.navigator.languages||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||window.navigator.systemLanguage}catch(p){}var n={};n.n=a,n.u=r.href,s!=null&&(n.l=s),e!=null&&(n.d=e),i!=null&&(n.k=i),n.r=window.document.referrer||null,t&&t.meta&&(n.m=JSON.stringify(t.meta)),t&&t.props&&(n.p=JSON.stringify(t.props));var v;try{v=window.screen.width}catch(p){}v!=null&&(n.sw=v);var g;try{g=window.screen.height}catch(p){}g!=null&&(n.sh=g);var h;try{h=window.devicePixelRatio}catch(p){}return h!=null&&(n.sr=h),n}function y(a,t){var i=f(a,t),e=new XMLHttpRequest;e.open("POST",c,!0),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(i)),e.onreadystatechange=function(){e.readyState===4&&t&&t.callback&&t.callback({status:e.status})}}function m(a,t){var i=navigator.sendBeacon!=null;t=t||{},t.meta=t.meta||{},t.meta.has_sendBeacon=String(i);var e=JSON.stringify(f(a,t));if(i){var s=new Blob([e],{type:"text/plain"});navigator.sendBeacon(c,s)}else{var n=new XMLHttpRequest;n.open("POST",c,!0),n.setRequestHeader("Content-Type","text/plain"),n.send(e)}}window[b]={sendEvent:y};var u;function d(){u!==r.pathname&&(u=r.pathname,y("pageview"))}var w=window.history;if(w.pushState){var S=w.pushState;w.pushState=function(){S.apply(this,arguments),d()},window.addEventListener("popstate",d)}window.document.visibilityState==="prerender"?window.document.addEventListener("visibilitychange",function(){u||window.document.visibilityState!=="visible"||d()}):d(),document.addEventListener("visibilitychange",function(){var t=document.visibilityState==="hidden"?"x-visibilitychange-hidden":"x-visibilitychange-visible";m(t)}),document.addEventListener("pagehide",function(){m("x-pagehide")})})();
