{"version":3,"file":"static/webpack/static/development/pages/dev-workflow.js.7c507fea01c3e45f0455.hot-update.js","sources":["webpack:///../node_modules/ui/Image.js"],"sourcesContent":["// @flow\n\nimport * as React from 'react';\nimport { Image as ImageBase, View } from 'react-native-web';\nimport { useDOMSize } from './Layout.js';\n\ntype Props = {|\n  source: string,\n  previewSource?: ?string,\n  size: {| width: number, height: number |},\n|};\n\nfunction delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function Image({\n  source,\n  previewSource,\n  size: { width, height },\n}: Props) {\n  let [size, ref] = useDOMSize();\n  let [img, setImg] = React.useState();\n\n  React.useEffect(() => {\n    let img = new window.Image();\n    img.src = source;\n    img.decode().then(async () => {\n      await delay(1000);\n      setImg(source);\n    });\n    return () => {\n      img.src = '';\n      try {\n        delete img.src;\n      } catch (e) {\n        // On Safari in Strict mode this will throw an exception,\n      }\n      img = null;\n    };\n  }, [source]);\n\n  if (size == null) {\n    return <View ref={ref} style={{ width: '100%' }} />;\n  }\n  let ratio = height / width;\n  return (\n    <ImageBase\n      source={img != null ? img : previewSource}\n      style={{ width: size.width, height: size.width * ratio }}\n      resizeMode=\"contain\"\n    />\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAOA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;A","sourceRoot":""}